<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="I/O: The PSRC Data Blog">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>My Little Leaflet SHAPEFILE! Demo</title>
    <meta property="og:title" content="My Little Leaflet">

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />

    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <script src="/leaflet/catiline.min.js"></script>
    <script src="/leaflet/leaflet.shpfile.js"></script>
  </head>

<body>
<h2><b>&raquo;PARKS AND OPEN SPACE</b></h2>

<div id="mapid" style="height:800px;"></div>

<script>
    function style(feature) {
	    return {
	        fillColor: '#6c6',
	        weight: 1,
	        opacity: 0.7,
	        color: 'white',
	        dashArray: '3',
	        fillOpacity: 0.7
	    };
	}

    var mymap = L.map('mapid').setView([47.6, -122.25], 11);

    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
	    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
	    maxZoom: 18,
	    id: 'mapbox.light',
	    accessToken: 'pk.eyJ1IjoicHNyYyIsImEiOiJjaXFmc2UxanMwM3F6ZnJtMWp3MjBvZHNrIn0._Dmske9er0ounTbBmdRrRQ'
	}).addTo(mymap);

    var shpfile = new L.Shapefile('/leaflet/pierce.zip', {style: style});

    shpfile.addTo(mymap);
	shpfile.once("data:loaded", function() {
			console.log("finished loaded shapefile");
	});

</script>

</body>
</html>
